{"ast":null,"code":"import React,{useEffect}from\"react\";import{GoogleAuthProvider,getRedirectResult,signInWithRedirect}from\"firebase/auth\";import{auth,db}from\"./firebase\";// Ensure this is your correct Firebase configuration\nimport{toast}from\"react-toastify\";import{setDoc,doc}from\"firebase/firestore\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SignInWithGoogle(){const navigate=useNavigate();useEffect(()=>{const handleRedirectResult=async()=>{try{console.log(\"Checking redirect result...\");const result=await getRedirectResult(auth);if(result){const user=result.user;console.log(\"User signed in\",user);await setDoc(doc(db,\"Users\",user.uid),{email:user.email,firstName:user.displayName,photo:user.photoURL,lastName:\"\"});console.log(\"User data saved to Firestore\");toast.success(\"User logged in successfully\",{position:\"top-center\"});navigate(\"/profile\");}else{console.log(\"No redirect result found\");}}catch(error){console.error(\"Error during redirect sign-in:\",error);toast.error(\"Error during sign-in. Please try again.\",{position:\"bottom-center\"});}};handleRedirectResult();},[navigate]);const googleLogin=()=>{const provider=new GoogleAuthProvider();signInWithRedirect(auth,provider);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"continue-p\",children:\"--Or continue with--\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",cursor:\"pointer\"},onClick:googleLogin,children:/*#__PURE__*/_jsx(\"img\",{src:require(\"../google.png\"),width:\"60%\",alt:\"Sign in with Google\"})})]});}export default SignInWithGoogle;","map":{"version":3,"names":["React","useEffect","GoogleAuthProvider","getRedirectResult","signInWithRedirect","auth","db","toast","setDoc","doc","useNavigate","jsx","_jsx","jsxs","_jsxs","SignInWithGoogle","navigate","handleRedirectResult","console","log","result","user","uid","email","firstName","displayName","photo","photoURL","lastName","success","position","error","googleLogin","provider","children","className","style","display","justifyContent","cursor","onClick","src","require","width","alt"],"sources":["C:/Projects/Mod_App_Front/src/components/signInWIthGoogle.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport {\r\n  GoogleAuthProvider,\r\n  getRedirectResult,\r\n  signInWithRedirect,\r\n} from \"firebase/auth\";\r\nimport { auth, db } from \"./firebase\"; // Ensure this is your correct Firebase configuration\r\nimport { toast } from \"react-toastify\";\r\nimport { setDoc, doc } from \"firebase/firestore\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction SignInWithGoogle() {\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const handleRedirectResult = async () => {\r\n      try {\r\n        console.log(\"Checking redirect result...\");\r\n        const result = await getRedirectResult(auth);\r\n        if (result) {\r\n          const user = result.user;\r\n          console.log(\"User signed in\", user);\r\n          await setDoc(doc(db, \"Users\", user.uid), {\r\n            email: user.email,\r\n            firstName: user.displayName,\r\n            photo: user.photoURL,\r\n            lastName: \"\",\r\n          });\r\n          console.log(\"User data saved to Firestore\");\r\n          toast.success(\"User logged in successfully\", {\r\n            position: \"top-center\",\r\n          });\r\n          navigate(\"/profile\");\r\n        } else {\r\n          console.log(\"No redirect result found\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error during redirect sign-in:\", error);\r\n        toast.error(\"Error during sign-in. Please try again.\", {\r\n          position: \"bottom-center\",\r\n        });\r\n      }\r\n    };\r\n\r\n    handleRedirectResult();\r\n  }, [navigate]);\r\n\r\n  const googleLogin = () => {\r\n    const provider = new GoogleAuthProvider();\r\n    signInWithRedirect(auth, provider);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <p className=\"continue-p\">--Or continue with--</p>\r\n      <div\r\n        style={{ display: \"flex\", justifyContent: \"center\", cursor: \"pointer\" }}\r\n        onClick={googleLogin}\r\n      >\r\n        <img\r\n          src={require(\"../google.png\")}\r\n          width={\"60%\"}\r\n          alt=\"Sign in with Google\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignInWithGoogle;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OACEC,kBAAkB,CAClBC,iBAAiB,CACjBC,kBAAkB,KACb,eAAe,CACtB,OAASC,IAAI,CAAEC,EAAE,KAAQ,YAAY,CAAE;AACvC,OAASC,KAAK,KAAQ,gBAAgB,CACtC,OAASC,MAAM,CAAEC,GAAG,KAAQ,oBAAoB,CAChD,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,QAAS,CAAAC,gBAAgBA,CAAA,CAAG,CAC1B,KAAM,CAAAC,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAE9BT,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgB,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvC,GAAI,CACFC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAC1C,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAjB,iBAAiB,CAACE,IAAI,CAAC,CAC5C,GAAIe,MAAM,CAAE,CACV,KAAM,CAAAC,IAAI,CAAGD,MAAM,CAACC,IAAI,CACxBH,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEE,IAAI,CAAC,CACnC,KAAM,CAAAb,MAAM,CAACC,GAAG,CAACH,EAAE,CAAE,OAAO,CAAEe,IAAI,CAACC,GAAG,CAAC,CAAE,CACvCC,KAAK,CAAEF,IAAI,CAACE,KAAK,CACjBC,SAAS,CAAEH,IAAI,CAACI,WAAW,CAC3BC,KAAK,CAAEL,IAAI,CAACM,QAAQ,CACpBC,QAAQ,CAAE,EACZ,CAAC,CAAC,CACFV,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC,CAC3CZ,KAAK,CAACsB,OAAO,CAAC,6BAA6B,CAAE,CAC3CC,QAAQ,CAAE,YACZ,CAAC,CAAC,CACFd,QAAQ,CAAC,UAAU,CAAC,CACtB,CAAC,IAAM,CACLE,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC,CACzC,CACF,CAAE,MAAOY,KAAK,CAAE,CACdb,OAAO,CAACa,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACtDxB,KAAK,CAACwB,KAAK,CAAC,yCAAyC,CAAE,CACrDD,QAAQ,CAAE,eACZ,CAAC,CAAC,CACJ,CACF,CAAC,CAEDb,oBAAoB,CAAC,CAAC,CACxB,CAAC,CAAE,CAACD,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAgB,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAA/B,kBAAkB,CAAC,CAAC,CACzCE,kBAAkB,CAACC,IAAI,CAAE4B,QAAQ,CAAC,CACpC,CAAC,CAED,mBACEnB,KAAA,QAAAoB,QAAA,eACEtB,IAAA,MAAGuB,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAC,sBAAoB,CAAG,CAAC,cAClDtB,IAAA,QACEwB,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAQ,CAAEC,MAAM,CAAE,SAAU,CAAE,CACxEC,OAAO,CAAER,WAAY,CAAAE,QAAA,cAErBtB,IAAA,QACE6B,GAAG,CAAEC,OAAO,CAAC,eAAe,CAAE,CAC9BC,KAAK,CAAE,KAAM,CACbC,GAAG,CAAC,qBAAqB,CAC1B,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAA7B,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}