{"ast":null,"code":"import React from\"react\";import{GoogleAuthProvider,signInWithPopup}from\"firebase/auth\";import{auth,db}from\"./firebase\";// Ensure this is your correct Firebase configuration\nimport{toast}from\"react-toastify\";import{setDoc,doc}from\"firebase/firestore\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SignInWithGoogle(){const navigate=useNavigate();const googleLogin=async()=>{const provider=new GoogleAuthProvider();try{console.log(\"Initiating sign-in with popup\");const result=await signInWithPopup(auth,provider);const user=result.user;if(user){console.log(\"User signed in\",user);await setDoc(doc(db,\"Users\",user.uid),{email:user.email,firstName:user.displayName,photo:user.photoURL,lastName:\"\"});console.log(\"User data saved to Firestore\");toast.success(\"User logged in successfully\",{position:\"top-center\"});navigate(\"/profile\");}}catch(error){console.error(\"Error during sign-in:\",error);if(error.code===\"auth/popup-closed-by-user\"){toast.error(\"Sign-in popup was closed. Please try again.\",{position:\"bottom-center\"});}else if(error.code===\"auth/network-request-failed\"){toast.error(\"Network error. Please check your connection and try again.\",{position:\"bottom-center\"});}else if(error.code===\"auth/cancelled-popup-request\"){toast.error(\"Another sign-in attempt was made. Please try again.\",{position:\"bottom-center\"});}else{toast.error(\"Error during sign-in. Please try again.\",{position:\"bottom-center\"});}}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"continue-p\",children:\"--Or continue with--\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",cursor:\"pointer\"},onClick:googleLogin,children:/*#__PURE__*/_jsx(\"img\",{src:require(\"../google.png\"),width:\"60%\",alt:\"Sign in with Google\"})})]});}export default SignInWithGoogle;","map":{"version":3,"names":["React","GoogleAuthProvider","signInWithPopup","auth","db","toast","setDoc","doc","useNavigate","jsx","_jsx","jsxs","_jsxs","SignInWithGoogle","navigate","googleLogin","provider","console","log","result","user","uid","email","firstName","displayName","photo","photoURL","lastName","success","position","error","code","children","className","style","display","justifyContent","cursor","onClick","src","require","width","alt"],"sources":["C:/Projects/Mod_App_Front/src/components/SignInWithGoogle.js"],"sourcesContent":["import React from \"react\";\r\nimport { GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\r\nimport { auth, db } from \"./firebase\"; // Ensure this is your correct Firebase configuration\r\nimport { toast } from \"react-toastify\";\r\nimport { setDoc, doc } from \"firebase/firestore\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction SignInWithGoogle() {\r\n  const navigate = useNavigate();\r\n\r\n  const googleLogin = async () => {\r\n    const provider = new GoogleAuthProvider();\r\n    try {\r\n      console.log(\"Initiating sign-in with popup\");\r\n      const result = await signInWithPopup(auth, provider);\r\n      const user = result.user;\r\n      if (user) {\r\n        console.log(\"User signed in\", user);\r\n        await setDoc(doc(db, \"Users\", user.uid), {\r\n          email: user.email,\r\n          firstName: user.displayName,\r\n          photo: user.photoURL,\r\n          lastName: \"\",\r\n        });\r\n        console.log(\"User data saved to Firestore\");\r\n        toast.success(\"User logged in successfully\", {\r\n          position: \"top-center\",\r\n        });\r\n        navigate(\"/profile\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error during sign-in:\", error);\r\n      if (error.code === \"auth/popup-closed-by-user\") {\r\n        toast.error(\"Sign-in popup was closed. Please try again.\", {\r\n          position: \"bottom-center\",\r\n        });\r\n      } else if (error.code === \"auth/network-request-failed\") {\r\n        toast.error(\r\n          \"Network error. Please check your connection and try again.\",\r\n          {\r\n            position: \"bottom-center\",\r\n          }\r\n        );\r\n      } else if (error.code === \"auth/cancelled-popup-request\") {\r\n        toast.error(\"Another sign-in attempt was made. Please try again.\", {\r\n          position: \"bottom-center\",\r\n        });\r\n      } else {\r\n        toast.error(\"Error during sign-in. Please try again.\", {\r\n          position: \"bottom-center\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <p className=\"continue-p\">--Or continue with--</p>\r\n      <div\r\n        style={{ display: \"flex\", justifyContent: \"center\", cursor: \"pointer\" }}\r\n        onClick={googleLogin}\r\n      >\r\n        <img\r\n          src={require(\"../google.png\")}\r\n          width={\"60%\"}\r\n          alt=\"Sign in with Google\"\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignInWithGoogle;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,kBAAkB,CAAEC,eAAe,KAAQ,eAAe,CACnE,OAASC,IAAI,CAAEC,EAAE,KAAQ,YAAY,CAAE;AACvC,OAASC,KAAK,KAAQ,gBAAgB,CACtC,OAASC,MAAM,CAAEC,GAAG,KAAQ,oBAAoB,CAChD,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,QAAS,CAAAC,gBAAgBA,CAAA,CAAG,CAC1B,KAAM,CAAAC,QAAQ,CAAGN,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAO,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAf,kBAAkB,CAAC,CAAC,CACzC,GAAI,CACFgB,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC,CAC5C,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAjB,eAAe,CAACC,IAAI,CAAEa,QAAQ,CAAC,CACpD,KAAM,CAAAI,IAAI,CAAGD,MAAM,CAACC,IAAI,CACxB,GAAIA,IAAI,CAAE,CACRH,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEE,IAAI,CAAC,CACnC,KAAM,CAAAd,MAAM,CAACC,GAAG,CAACH,EAAE,CAAE,OAAO,CAAEgB,IAAI,CAACC,GAAG,CAAC,CAAE,CACvCC,KAAK,CAAEF,IAAI,CAACE,KAAK,CACjBC,SAAS,CAAEH,IAAI,CAACI,WAAW,CAC3BC,KAAK,CAAEL,IAAI,CAACM,QAAQ,CACpBC,QAAQ,CAAE,EACZ,CAAC,CAAC,CACFV,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC,CAC3Cb,KAAK,CAACuB,OAAO,CAAC,6BAA6B,CAAE,CAC3CC,QAAQ,CAAE,YACZ,CAAC,CAAC,CACFf,QAAQ,CAAC,UAAU,CAAC,CACtB,CACF,CAAE,MAAOgB,KAAK,CAAE,CACdb,OAAO,CAACa,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7C,GAAIA,KAAK,CAACC,IAAI,GAAK,2BAA2B,CAAE,CAC9C1B,KAAK,CAACyB,KAAK,CAAC,6CAA6C,CAAE,CACzDD,QAAQ,CAAE,eACZ,CAAC,CAAC,CACJ,CAAC,IAAM,IAAIC,KAAK,CAACC,IAAI,GAAK,6BAA6B,CAAE,CACvD1B,KAAK,CAACyB,KAAK,CACT,4DAA4D,CAC5D,CACED,QAAQ,CAAE,eACZ,CACF,CAAC,CACH,CAAC,IAAM,IAAIC,KAAK,CAACC,IAAI,GAAK,8BAA8B,CAAE,CACxD1B,KAAK,CAACyB,KAAK,CAAC,qDAAqD,CAAE,CACjED,QAAQ,CAAE,eACZ,CAAC,CAAC,CACJ,CAAC,IAAM,CACLxB,KAAK,CAACyB,KAAK,CAAC,yCAAyC,CAAE,CACrDD,QAAQ,CAAE,eACZ,CAAC,CAAC,CACJ,CACF,CACF,CAAC,CAED,mBACEjB,KAAA,QAAAoB,QAAA,eACEtB,IAAA,MAAGuB,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAC,sBAAoB,CAAG,CAAC,cAClDtB,IAAA,QACEwB,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAQ,CAAEC,MAAM,CAAE,SAAU,CAAE,CACxEC,OAAO,CAAEvB,WAAY,CAAAiB,QAAA,cAErBtB,IAAA,QACE6B,GAAG,CAAEC,OAAO,CAAC,eAAe,CAAE,CAC9BC,KAAK,CAAE,KAAM,CACbC,GAAG,CAAC,qBAAqB,CAC1B,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAA7B,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}