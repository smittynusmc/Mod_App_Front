{"ast":null,"code":"import React from\"react\";import{GoogleAuthProvider,signInWithPopup}from\"firebase/auth\";import{auth,db}from\"./firebase\";import{toast}from\"react-toastify\";import{setDoc,doc}from\"firebase/firestore\";import{useNavigate}from\"react-router-dom\";function SignInWithGoogle(){const navigate=useNavigate();const googleLogin=async()=>{const provider=new GoogleAuthProvider();try{console.log(\"Initiating sign-in with popup\");const result=await signInWithPopup(auth,provider);const user=result.user;if(user){console.log(\"User signed in\",user);await setDoc(doc(db,\"Users\",user.uid),{email:user.email,firstName:user.displayName,photo:user.photoURL,lastName:\"\"});console.log(\"User data saved to Firestore\");toast.success(\"User logged in successfully\",{position:\"top-center\"});navigate(\"/profile\");}}catch(error){console.error(\"Error during sign-in:\",error);if(error.code==='auth/popup-closed-by-user'){toast.error(\"Sign-in popup was closed. Please try again.\",{position:\"bottom-center\"});}else{toast.error(\"Error during sign-in. Please try again.\",{position:\"bottom-center\"});}}};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"continue-p\"},\"--Or continue with--\"),/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"center\",cursor:\"pointer\"},onClick:googleLogin},/*#__PURE__*/React.createElement(\"img\",{src:require(\"../google.png\"),width:\"60%\",alt:\"Sign in with Google\"})));}export default SignInWithGoogle;","map":{"version":3,"names":["React","GoogleAuthProvider","signInWithPopup","auth","db","toast","setDoc","doc","useNavigate","SignInWithGoogle","navigate","googleLogin","provider","console","log","result","user","uid","email","firstName","displayName","photo","photoURL","lastName","success","position","error","code","createElement","className","style","display","justifyContent","cursor","onClick","src","require","width","alt"],"sources":["C:/Projects/Mod_App_Front/src/components/signInWIthGoogle.js"],"sourcesContent":["import React from \"react\";\r\nimport { GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\r\nimport { auth, db } from \"./firebase\";\r\nimport { toast } from \"react-toastify\";\r\nimport { setDoc, doc } from \"firebase/firestore\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction SignInWithGoogle() {\r\n  const navigate = useNavigate();\r\n\r\n  const googleLogin = async () => {\r\n    const provider = new GoogleAuthProvider();\r\n    try {\r\n      console.log(\"Initiating sign-in with popup\");\r\n      const result = await signInWithPopup(auth, provider);\r\n      const user = result.user;\r\n      if (user) {\r\n        console.log(\"User signed in\", user);\r\n        await setDoc(doc(db, \"Users\", user.uid), {\r\n          email: user.email,\r\n          firstName: user.displayName,\r\n          photo: user.photoURL,\r\n          lastName: \"\",\r\n        });\r\n        console.log(\"User data saved to Firestore\");\r\n        toast.success(\"User logged in successfully\", {\r\n          position: \"top-center\",\r\n        });\r\n        navigate(\"/profile\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error during sign-in:\", error);\r\n      if (error.code === 'auth/popup-closed-by-user') {\r\n        toast.error(\"Sign-in popup was closed. Please try again.\", {\r\n          position: \"bottom-center\",\r\n        });\r\n      } else {\r\n        toast.error(\"Error during sign-in. Please try again.\", {\r\n          position: \"bottom-center\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <p className=\"continue-p\">--Or continue with--</p>\r\n      <div\r\n        style={{ display: \"flex\", justifyContent: \"center\", cursor: \"pointer\" }}\r\n        onClick={googleLogin}\r\n      >\r\n        <img src={require(\"../google.png\")} width={\"60%\"} alt=\"Sign in with Google\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SignInWithGoogle;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,kBAAkB,CAAEC,eAAe,KAAQ,eAAe,CACnE,OAASC,IAAI,CAAEC,EAAE,KAAQ,YAAY,CACrC,OAASC,KAAK,KAAQ,gBAAgB,CACtC,OAASC,MAAM,CAAEC,GAAG,KAAQ,oBAAoB,CAChD,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,QAAS,CAAAC,gBAAgBA,CAAA,CAAG,CAC1B,KAAM,CAAAC,QAAQ,CAAGF,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAG,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,KAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAX,kBAAkB,CAAC,CAAC,CACzC,GAAI,CACFY,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC,CAC5C,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAb,eAAe,CAACC,IAAI,CAAES,QAAQ,CAAC,CACpD,KAAM,CAAAI,IAAI,CAAGD,MAAM,CAACC,IAAI,CACxB,GAAIA,IAAI,CAAE,CACRH,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEE,IAAI,CAAC,CACnC,KAAM,CAAAV,MAAM,CAACC,GAAG,CAACH,EAAE,CAAE,OAAO,CAAEY,IAAI,CAACC,GAAG,CAAC,CAAE,CACvCC,KAAK,CAAEF,IAAI,CAACE,KAAK,CACjBC,SAAS,CAAEH,IAAI,CAACI,WAAW,CAC3BC,KAAK,CAAEL,IAAI,CAACM,QAAQ,CACpBC,QAAQ,CAAE,EACZ,CAAC,CAAC,CACFV,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC,CAC3CT,KAAK,CAACmB,OAAO,CAAC,6BAA6B,CAAE,CAC3CC,QAAQ,CAAE,YACZ,CAAC,CAAC,CACFf,QAAQ,CAAC,UAAU,CAAC,CACtB,CACF,CAAE,MAAOgB,KAAK,CAAE,CACdb,OAAO,CAACa,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7C,GAAIA,KAAK,CAACC,IAAI,GAAK,2BAA2B,CAAE,CAC9CtB,KAAK,CAACqB,KAAK,CAAC,6CAA6C,CAAE,CACzDD,QAAQ,CAAE,eACZ,CAAC,CAAC,CACJ,CAAC,IAAM,CACLpB,KAAK,CAACqB,KAAK,CAAC,yCAAyC,CAAE,CACrDD,QAAQ,CAAE,eACZ,CAAC,CAAC,CACJ,CACF,CACF,CAAC,CAED,mBACEzB,KAAA,CAAA4B,aAAA,yBACE5B,KAAA,CAAA4B,aAAA,MAAGC,SAAS,CAAC,YAAY,EAAC,sBAAuB,CAAC,cAClD7B,KAAA,CAAA4B,aAAA,QACEE,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAQ,CAAEC,MAAM,CAAE,SAAU,CAAE,CACxEC,OAAO,CAAEvB,WAAY,eAErBX,KAAA,CAAA4B,aAAA,QAAKO,GAAG,CAAEC,OAAO,CAAC,eAAe,CAAE,CAACC,KAAK,CAAE,KAAM,CAACC,GAAG,CAAC,qBAAqB,CAAE,CAC1E,CACF,CAAC,CAEV,CAEA,cAAe,CAAA7B,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module"}