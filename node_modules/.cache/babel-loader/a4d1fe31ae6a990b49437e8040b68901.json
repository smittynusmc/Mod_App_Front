{"ast":null,"code":"import _toConsumableArray from\"C:/Projects/Mod_App_Front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Projects/Mod_App_Front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Projects/Mod_App_Front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Projects\\\\Mod_App_Front\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var YouTubeComments=function YouTubeComments(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),videoId=_useState2[0],setVideoId=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),commentThreads=_useState4[0],setCommentThreads=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),accessToken=_useState6[0],setAccessToken=_useState6[1];useEffect(function(){var urlParams=new URLSearchParams(window.location.search);var token=urlParams.get(\"access_token\");if(token){setAccessToken(token);}},[]);var handleAuth=function handleAuth(){window.location.href=\"https://youtube-comments-backend-23opjzqi7q-uc.a.run.app/auth/google\";// Replace with your Cloud Run URL\n};var fetchComments=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"https://youtube-comments-backend-23opjzqi7q-uc.a.run.app/youtube/comments\",{// Replace with your Cloud Run URL\nvideoId:videoId,accessToken:accessToken});case 3:response=_context.sent;setCommentThreads(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(\"Error fetching comment threads\",_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchComments(){return _ref.apply(this,arguments);};}();var selectWinner=function selectWinner(){if(commentThreads.length===0)return;var allComments=commentThreads.flatMap(function(thread){return[thread.snippet.topLevelComment.snippet.textDisplay].concat(_toConsumableArray(thread.replies?thread.replies.comments.map(function(reply){return reply.snippet.textDisplay;}):[]));});var winner=allComments[Math.floor(Math.random()*allComments.length)];alert(\"The winner is: \".concat(winner));};return/*#__PURE__*/_jsx(\"div\",{children:!accessToken?/*#__PURE__*/_jsx(\"button\",{onClick:handleAuth,children:\"Authenticate with Google\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:videoId,onChange:function onChange(e){return setVideoId(e.target.value);},placeholder:\"Enter YouTube Video ID\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchComments,children:\"Fetch Comments\"}),/*#__PURE__*/_jsx(\"div\",{children:commentThreads.map(function(thread,index){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:thread.snippet.topLevelComment.snippet.textDisplay}),thread.replies&&thread.replies.comments.map(function(reply,replyIndex){return/*#__PURE__*/_jsx(\"p\",{style:{marginLeft:\"20px\"},children:reply.snippet.textDisplay},replyIndex);})]},index);})}),commentThreads.length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:selectWinner,children:\"Select Winner\"})]})});};export default YouTubeComments;","map":{"version":3,"sources":["C:/Projects/Mod_App_Front/src/components/YouTubeComments.js"],"names":["React","useState","useEffect","axios","YouTubeComments","videoId","setVideoId","commentThreads","setCommentThreads","accessToken","setAccessToken","urlParams","URLSearchParams","window","location","search","token","get","handleAuth","href","fetchComments","post","response","data","console","error","selectWinner","length","allComments","flatMap","thread","snippet","topLevelComment","textDisplay","replies","comments","map","reply","winner","Math","floor","random","alert","e","target","value","index","replyIndex","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst YouTubeComments = () => {\r\n  const [videoId, setVideoId] = useState(\"\");\r\n  const [commentThreads, setCommentThreads] = useState([]);\r\n  const [accessToken, setAccessToken] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const token = urlParams.get(\"access_token\");\r\n    if (token) {\r\n      setAccessToken(token);\r\n    }\r\n  }, []);\r\n\r\n  const handleAuth = () => {\r\n    window.location.href = \"https://youtube-comments-backend-23opjzqi7q-uc.a.run.app/auth/google\"; // Replace with your Cloud Run URL\r\n  };\r\n\r\n  const fetchComments = async () => {\r\n    try {\r\n      const response = await axios.post(\"https://youtube-comments-backend-23opjzqi7q-uc.a.run.app/youtube/comments\", { // Replace with your Cloud Run URL\r\n        videoId,\r\n        accessToken,\r\n      });\r\n      setCommentThreads(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching comment threads\", error);\r\n    }\r\n  };\r\n\r\n  const selectWinner = () => {\r\n    if (commentThreads.length === 0) return;\r\n    const allComments = commentThreads.flatMap(thread => [\r\n      thread.snippet.topLevelComment.snippet.textDisplay,\r\n      ...(thread.replies ? thread.replies.comments.map(reply => reply.snippet.textDisplay) : [])\r\n    ]);\r\n    const winner = allComments[Math.floor(Math.random() * allComments.length)];\r\n    alert(`The winner is: ${winner}`);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {!accessToken ? (\r\n        <button onClick={handleAuth}>Authenticate with Google</button>\r\n      ) : (\r\n        <>\r\n          <input\r\n            type=\"text\"\r\n            value={videoId}\r\n            onChange={(e) => setVideoId(e.target.value)}\r\n            placeholder=\"Enter YouTube Video ID\"\r\n          />\r\n          <button onClick={fetchComments}>Fetch Comments</button>\r\n          <div>\r\n            {commentThreads.map((thread, index) => (\r\n              <div key={index}>\r\n                <p>{thread.snippet.topLevelComment.snippet.textDisplay}</p>\r\n                {thread.replies && thread.replies.comments.map((reply, replyIndex) => (\r\n                  <p key={replyIndex} style={{ marginLeft: \"20px\" }}>{reply.snippet.textDisplay}</p>\r\n                ))}\r\n              </div>\r\n            ))}\r\n          </div>\r\n          {commentThreads.length > 0 && (\r\n            <button onClick={selectWinner}>Select Winner</button>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default YouTubeComments;\r\n"]},"metadata":{},"sourceType":"module"}